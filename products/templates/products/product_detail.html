{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container-fluid">
    <div class="align-items-center">
        <div class="row align-items-center">
            <div class="col-12 col-md-8 align-items-center">
                <div class="my-5 justify-content-center d-flex">
                    {% if product.image %}
                        <a href="{{ product.image.url }}" target="_blank">
                            <img class="card-img-top align-items-center img-height-detail img-fluid" src="{{ product.image.url }}" alt="{{ product.name }}">
                        </a>
                        {% else %}
                        <a href="">
                            <img class="card-img-top img-fluid" src="{{ MEDIA_URL }}noimage.png" alt="{{ product.name }}">
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="col-12 col-md-4 px-3">
                <div class="product-details-container mb-5 mt-md-5">
                    <p class="mb-0">{{ product.name }}</p>
                    <p class="lead mb-0 text-left font-weight-bold">Â£{{ product.price }}</p>
                    {% if product.category %}
                        <p class="small mt-1 mb-0">
                            <a href="{% url 'products' %}?category={{ product.category.name }}" class="text-muted">
                                <i class="fas fa-tag mr-1"></i>{{ product.category.friendly_name }}
                            </a>
                        </p>
                    {% endif %}
                    {% if product.rating %}
                        <small class="text-muted"><i class="fas fa-star mr-1"></i>{{ product.rating }} / 5</small>
                    {% else %}
                        <small class="text-muted">No Rating</small>
                    {% endif %}
                    {% if request.user.is_superuser %}
                        <small class="ml-3">
                            <a href="{% url 'edit_product' product.id %}">Edit</a> | 
                            <a class="text-danger" href="{% url 'delete_product' product.id %}">Delete</a>
                        </small>
                    {% endif %}
                    <p class="mt-3">{{ product.description }}</p>
                    <form class="form" action="{% url 'add_to_bag' product.id %}" method="POST">
                        {% csrf_token %}
                        <div class="form-row">
                            <div class="col-12">
                                <p><strong>Size:</strong></p>
                                <select class="form-control rounded-0 w-50" name="product_size" id='id_product_size'>
                                    <option value="xs">XS</option>
                                    <option value="s">S</option>
                                    <option value="m" selected>M</option>
                                    <option value="l">L</option>
                                    <option value="xl">XL</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <p class="mt-3"><strong>Quantity:</strong></p>
                                <div class="form-group w-50">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <button class="decrement-qty btn btn-black rounded-0" 
                                                data-item_id="{{ product.id }}" id="decrement-qty_{{ product.id }}">
                                                <span class="icon">
                                                    <i class="fas fa-minus"></i>
                                                </span>
                                            </button>
                                        </div>
                                        <input class="form-control qty_input" type="number"
                                            name="quantity" value="1" min="1" max="99"
                                            data-item_id="{{ product.id }}"
                                            id="id_qty_{{ product.id }}">
                                        <div class="input-group-append">
                                            <button class="increment-qty btn btn-black rounded-0"
                                                data-item_id="{{ product.id }}" id="increment-qty_{{ product.id }}">
                                                <span class="icon">
                                                    <i class="fas fa-plus"></i>
                                                </span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12">
                                <a href="{% url 'products' %}" class="btn btn-outline-black rounded-0 mt-5">
                                    <span class="icon">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="text-uppercase">Keep Shopping</span>
                                </a>
                                <input type="submit" class="btn btn-black rounded-0 text-uppercase mt-5" value="Add to Bag">
                            </div>
                            <input type="hidden" name="redirect_url" value="{{ request.path }}">
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- <div class="row d-flex justify-content-center lightblue-bg">
            <div class="col-12 col-lg-10 mx-auto" style="width: 800px;">
                <h3 class="mt-4">Comments</h3>
                <hr>
                <h2>Comments...</h2>
                {% if not product.comments.all %}
                    No comments yet... <a href="">Add one</a>
                {% else %}
                    {% for comment in product.comments.all %}
                        <bold>
                            {{ comment.name }} - 
                            {{ comment.date_added }} 
                            <br>
                        </bold>
                        {{ comment.body }}
                    {% endfor %}
                {% endif %}

            </div>
        </div>
         -->
        <!-- <div class="row row d-flex justify-content-center lightblue-bg">
            <div class="col-12 col-lg-10 mx-auto" style="width: 800px;">
                <div class="card-body p-0">
                    {% if user.is_authenticated %}
                    <h3 class="mt-4">Leave a comment:</h3>
                    <p>Posting as: {{ user.username }}</p>
                    <form method="post" style="margin-top: 1.3em;">
                        {{ comment_form | crispy }}
                        {% csrf_token %}
                        <button type="submit"
                            class="btn border-dark bd-highlight text-black btn-clear my-4">Submit</button>
                    </form>
                    {% endif %}
                </div>
            </div>
        </div>
    </div> -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"> -->
<section class="content-item" id="comments">
    <div class="container">   
    	<div class="row">
            <div class="col-sm-8">   
                <form method="post" style="margin-top: 1.3em;">
                	<h3 class="pull-left">New Comment</h3>
                    <fieldset>
                        <div class="wrap-form">
                            {{ comment_form | crispy }}
                            {% csrf_token %}
                            <button type="submit"
                                class="btn comment-btn border-dark bd-highlight text-black btn-clear">Submit</button>
                        </div>  	
                    </fieldset>
              
                </form>
                
                <h3>4 Comments</h3>
                
                <!-- COMMENT 1 - START -->
                <!-- <div class="media"> -->
                    <!-- <a class="pull-left" href="#"><img class="media-object" src="https://bootdey.com/img/Content/avatar/avatar1.png" alt=""></a> -->
                    <!-- <div class="media-body">
                        <h4 class="media-heading">John Doe</h4>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                        <ul class="list-unstyled list-inline media-detail pull-left">
                            <li><i class="fa fa-calendar"></i>27/02/2014</li>
                            <li><i class="fa fa-thumbs-up"></i>13</li>
                        </ul>
                        <ul class="list-unstyled list-inline media-detail pull-right">
                            <li class=""><a href="">Like</a></li>
                            <li class=""><a href="">Reply</a></li>
                        </ul>
                    </div>
                </div> -->
                <!-- COMMENT 1 - END -->

                {% if not product.comments.all %}
                    No comments yet... <a href="">Add one</a>
                {% else %}
                    {% for comment in product.comments.all %}
                        <bold>
                           
                             <!-- COMMENT 2 - START -->
                            <div class="media">
                                <div class="media-body">
                                    <h4 class="media-heading">{{ comment.name }}</h4>
                                    <p>{{ comment.body }}</p>
                                    <ul class="list-unstyled list-inline media-detail pull-left">
                                        <li><i class="fa fa-calendar"></i>{{ comment.date_added}}</li>
                                    </ul>
                                </div>
                            </div>
                            <!-- COMMENT 2 - END -->
                            <br>
                        </bold>
                    {% endfor %}
                {% endif %}
                
               
                
           
             
            
            </div>
        </div>
    </div>
</section>


</div>
    
   
{% endblock %}

{% block postloadjs %}
{{ block.super }}
{% include 'products/includes/quantity_input_script.html' %}
{% endblock %}